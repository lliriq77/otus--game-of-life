{"version":3,"file":"main.1b6be276bb.js","mappings":"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","sources":["webpack://otus--game-of-life/./src/utils/drawField.ts","webpack://otus--game-of-life/./src/utils/getNumberOfAliveAround.ts","webpack://otus--game-of-life/./src/utils/getNextGeneration.ts","webpack://otus--game-of-life/./src/utils/getNextCellState.ts","webpack://otus--game-of-life/./src/createGameOfLife.ts","webpack://otus--game-of-life/./src/index.ts"],"sourcesContent":["export function drawField(\n  el: HTMLElement,\n  field: number[][],\n  onCellClick: (a: number, b: number, c: boolean) => void\n) {\n  el.innerHTML = \"\";\n\n  const table: HTMLTableElement = document.createElement(\"table\");\n\n  field.forEach((row, y) => {\n    const tr: HTMLTableRowElement = document.createElement(\"tr\");\n\n    row.forEach((cell, x) => {\n      const td: HTMLTableCellElement = document.createElement(\"td\");\n\n      td.classList.add(\"cell\");\n      td.classList.add(cell === 0 ? \"cell--dead\" : \"cell--alive\");\n      td.dataset.x = `${x}`;\n      td.dataset.y = `${y}`;\n      tr.append(td);\n    });\n    table.append(tr);\n  });\n\n  table.addEventListener(\"click\", (evt) => {\n    const element = <HTMLElement>evt.target;\n\n    if (element.classList.contains(\"cell\")) {\n      const isAlive: boolean = element.classList.contains(\"cell--alive\");\n\n      onCellClick(\n        Number(element.dataset.x),\n        Number(element.dataset.y),\n        isAlive\n      );\n    }\n  });\n  el.append(table);\n}\n","export function getNumberOfAliveAround(\n  field: number[][],\n  x: number,\n  y: number\n) {\n  /**\n   * x - 1, y - 1\n   * x , y - 1\n   * x + 1, y - 1\n   * x - 1, y\n   * x + 1, y\n   * x - 1, y + 1\n   * x, y + 1\n   * x + 1, y + 1\n   */\n  let num = 0;\n  if (y - 1 >= 0 && y - 1 < field.length) {\n    num += field[y - 1][x - 1] || 0;\n    num += field[y - 1][x] || 0;\n    num += field[y - 1][x + 1] || 0;\n  }\n  if (y >= 0 && y < field.length) {\n    num += field[y][x - 1] || 0;\n    num += field[y][x + 1] || 0;\n  }\n  if (y + 1 >= 0 && y + 1 < field.length) {\n    num += field[y + 1][x - 1] || 0;\n    num += field[y + 1][x] || 0;\n    num += field[y + 1][x + 1] || 0;\n  }\n  return num;\n}\n","import { getNumberOfAliveAround } from \"./getNumberOfAliveAround\";\nimport { getNextCellState } from \"./getNextCellState\";\n\nexport function getNextGeneration(field: number[][]) {\n  const result: number[][] = field.slice(0);\n  for (let y = 0; y < field.length; y += 1) {\n    // result[y] === field[y]\n    result[y] = result[y].slice(0);\n\n    for (let x = 0; x < field[y].length; x += 1) {\n      const num: number = getNumberOfAliveAround(field, x, y);\n      const state: boolean = field[y][x] !== 0;\n      const nextState: boolean = getNextCellState(state, num);\n      result[y][x] = nextState ? 1 : 0;\n    }\n  }\n  return result;\n}\n","export function getNextCellState(state: boolean, neighbors: number): boolean {\n  if (state === false && neighbors === 3) {\n    return true;\n  }\n  // if (state === true && (neighbors === 2 || neighbors === 3)) {\n  //   return true;\n  // }\n  // return false;\n  return state === true && (neighbors === 2 || neighbors === 3);\n}\n","import { drawField } from \"./utils/drawField\";\nimport { getNextGeneration } from \"./utils/getNextGeneration\";\n\nlet WIDTH = 20;\nlet HEIGHT = 20;\nconst GAME_STEP_DELAY_IN_MS = 1000;\nlet field: number[][];\nexport function createGameOfLife(\n  el: HTMLElement,\n  step = GAME_STEP_DELAY_IN_MS\n): void {\n  field = Array.from({ length: HEIGHT }).map(\n    () => Array.from({ length: WIDTH }).fill(0) as number[]\n  );\n\n  const fieldEl: HTMLDivElement = document.createElement(\"div\");\n  fieldEl.classList.add(\"field\");\n  el.append(fieldEl);\n\n  const buttonEl: HTMLButtonElement = document.createElement(\"button\");\n  buttonEl.innerHTML = \"Start\";\n  el.append(buttonEl);\n\n  const buttonPlus: HTMLButtonElement = document.createElement(\"button\");\n  buttonPlus.innerHTML = \"+\";\n  el.append(buttonPlus);\n\n  const buttonMin: HTMLButtonElement = document.createElement(\"button\");\n  buttonMin.innerHTML = \"-\";\n  el.append(buttonMin);\n\n  let intervalId: any;\n  buttonEl.addEventListener(\"click\", () => {\n    if (buttonEl.innerHTML === \"Start\") {\n      buttonEl.innerHTML = \"Stop\";\n      intervalId = setInterval(makeGameStep, step);\n    } else {\n      buttonEl.innerHTML = \"Start\";\n      clearInterval(intervalId);\n    }\n  });\n\n  buttonPlus.addEventListener(\"click\", () => {\n    WIDTH += 1;\n    HEIGHT += 1;\n    const newField = Array.from({ length: HEIGHT }).map(\n      () => Array.from({ length: WIDTH }).fill(0) as number[]\n    );\n    field = getNextGeneration(field);\n\n    for (let y = 0; y < newField.length - 1; y += 1) {\n      for (let x = 0; x < newField[y].length - 1; x += 1) {\n        newField[y][x] = field[y][x];\n      }\n    }\n    drawField(fieldEl, newField, onCellClick);\n    field = newField;\n  });\n\n  buttonMin.addEventListener(\"click\", () => {\n    WIDTH -= 1;\n    HEIGHT -= 1;\n    const newField = Array.from({ length: HEIGHT }).map(\n      () => Array.from({ length: WIDTH }).fill(0) as number[]\n    );\n    field = getNextGeneration(field);\n\n    for (let y = 0; y < newField.length; y += 1) {\n      for (let x = 0; x < newField[y].length; x += 1) {\n        newField[y][x] = field[y][x];\n      }\n    }\n    drawField(fieldEl, newField, onCellClick);\n    field = newField;\n  });\n\n  function makeGameStep(): void {\n    field = getNextGeneration(field);\n    drawField(fieldEl, field, onCellClick);\n  }\n\n  const onCellClick: (a: number, b: number) => void = (x, y) => {\n    field[y][x] = field[y][x] ? 0 : 1;\n    drawField(fieldEl, field, onCellClick);\n  };\n\n  drawField(fieldEl, field, onCellClick);\n}\n","import \"./styles.css\";\nimport { createGameOfLife } from \"./createGameOfLife\";\n\ncreateGameOfLife(document.querySelector(\"#app\") as HTMLElement);\n// - правила с логикой\n// - интерфейс\n// - интерфейс поля\n// - обработчики событий (менять состояние клетки при нажатии)\n// - автоматический пересчет состояний\n// /**\n//  *    0 1 0 0 1 0 1\n//  *    0 1 0 0 1 0 0\n//  *    0 1 0 0 1 1 1\n//  */\n\n//  // y - 0, 1, 2\n//  // x - 0-6\n//  // (x, y)\n//  // (1, 2) -> 1\n//  // (5, 1) -> 0\n//  // (5, 2) -> 1\n//  // (6, 0) -> 1\n// const field = [\n//   [0, 1, 0, 0, 1, 0, 1],\n//   [0, 1, 0, 0, 1, 0, 0],\n//   [0, 1, 0, 0, 1, 1, 1]\n// ];\n\n// const x = 4;\n// const y = 1;\n// field[y][x]\n"],"names":["drawField","el","field","onCellClick","innerHTML","table","document","createElement","forEach","row","y","tr","cell","x","td","classList","add","dataset","append","addEventListener","evt","element","target","contains","isAlive","Number","getNumberOfAliveAround","num","length","getNextGeneration","result","slice","nextState","state","neighbors","WIDTH","HEIGHT","step","Array","from","map","fill","fieldEl","buttonEl","buttonPlus","intervalId","buttonMin","makeGameStep","setInterval","clearInterval","newField","createGameOfLife","querySelector"],"sourceRoot":""}